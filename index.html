<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>
<script type="text/javascript" charset="utf-8">

	window.onload = function () {
		var ukmap = Raphael("ukmap", 300, 500);
		var bodymap = Raphael("bodymap", 300, 500);
		var attr = {
			fill: "#00ff00",
			stroke: "#666",
			"stroke-width": 0.01,
			"stroke-linejoin": "round"
		};

		var capabilitymap2 = {};
		capabilitymap2.London = bodymap.path("m 219.45753,382.02072 c 1.18511,-0.73182 2.56773,-0.41821 3.8516,-0.41821 0.19754,0.62726 0.0988,1.35909 0.59256,1.88179 0.69131,0.62728 1.48138,1.35909 2.27146,1.98635 0.39504,0.31373 0.88883,0.10471 1.28386,0 1.48139,-0.41816 2.86402,-0.94088 4.3454,-1.04542 0.39504,1.04542 0.79007,2.1954 1.18512,3.24086 -0.69132,1.04544 -1.58015,1.88179 -2.17271,2.92723 -0.69131,2.29995 -1.58014,4.59995 -2.37022,6.89991 -0.29626,1.14997 -1.1851,1.98634 -2.17269,2.40451 -0.98759,-0.20903 -1.77766,-0.94089 -2.76526,-1.25454 -0.79007,0.62726 -1.38262,1.35908 -2.1727,2.0909 -0.49379,-0.62727 -0.88884,-1.25453 -1.28387,-1.98634 -0.59255,-0.10472 -1.1851,-0.10472 -1.77766,-0.20903 -0.19753,-0.73181 -0.39504,-1.35907 -0.79007,-2.09089 -0.88884,-0.10471 -1.28387,1.04547 -1.87643,1.56817 0,-0.73181 0.29626,-1.67272 -0.39503,-2.09088 -1.67891,-1.25454 -3.55532,-2.40451 -5.23423,-3.65905 -0.0988,-1.25452 0.79007,-2.4045 0.88883,-3.55448 -0.19753,-0.94091 -0.59255,-1.77728 -0.88883,-2.71815 1.38263,-0.31373 2.76525,-0.20903 4.14788,-0.62727 1.87642,-0.94091 3.55532,-2.19545 5.33299,-3.34542 z").attr(attr);	
		
		
		var capabilitymap = {};
		capabilitymap.Cambridge = ukmap.circle(251, 370, 4).attr(attr);
		capabilitymap.Oxford = ukmap.circle(183, 385, 4).attr(attr);			
		capabilitymap.Bristol = ukmap.circle(164,413,4).attr(attr);
		capabilitymap.Cardiff = ukmap.circle(149,396,4).attr(attr);
		capabilitymap.Dublin = ukmap.circle(30,363,4).attr(attr);
		capabilitymap.Belfast = ukmap.circle(72,251.5,4).attr(attr);
		capabilitymap.Leicester = ukmap.circle(194,343,4).attr(attr);
		capabilitymap.Nottingham = ukmap.circle(222,323,4).attr(attr);
		capabilitymap.Sheffield = ukmap.circle(220,294,4).attr(attr);
		capabilitymap.Manchester = ukmap.circle(192,290,4).attr(attr);
		capabilitymap.Liverpool = ukmap.circle(164,283,4).attr(attr);
		capabilitymap.Leeds = ukmap.circle(207,262,4).attr(attr);
		capabilitymap.Hull = ukmap.circle(231,272,4).attr(attr);
		capabilitymap.Newcastle = ukmap.circle(186,211,4).attr(attr);
		capabilitymap.Glasgow = ukmap.circle(105,159,4).attr(attr);
		capabilitymap.Sussex = ukmap.circle(217,426,4).attr(attr);
		capabilitymap.London = ukmap.path("m 219.45753,382.02072 c 1.18511,-0.73182 2.56773,-0.41821 3.8516,-0.41821 0.19754,0.62726 0.0988,1.35909 0.59256,1.88179 0.69131,0.62728 1.48138,1.35909 2.27146,1.98635 0.39504,0.31373 0.88883,0.10471 1.28386,0 1.48139,-0.41816 2.86402,-0.94088 4.3454,-1.04542 0.39504,1.04542 0.79007,2.1954 1.18512,3.24086 -0.69132,1.04544 -1.58015,1.88179 -2.17271,2.92723 -0.69131,2.29995 -1.58014,4.59995 -2.37022,6.89991 -0.29626,1.14997 -1.1851,1.98634 -2.17269,2.40451 -0.98759,-0.20903 -1.77766,-0.94089 -2.76526,-1.25454 -0.79007,0.62726 -1.38262,1.35908 -2.1727,2.0909 -0.49379,-0.62727 -0.88884,-1.25453 -1.28387,-1.98634 -0.59255,-0.10472 -1.1851,-0.10472 -1.77766,-0.20903 -0.19753,-0.73181 -0.39504,-1.35907 -0.79007,-2.09089 -0.88884,-0.10471 -1.28387,1.04547 -1.87643,1.56817 0,-0.73181 0.29626,-1.67272 -0.39503,-2.09088 -1.67891,-1.25454 -3.55532,-2.40451 -5.23423,-3.65905 -0.0988,-1.25452 0.79007,-2.4045 0.88883,-3.55448 -0.19753,-0.94091 -0.59255,-1.77728 -0.88883,-2.71815 1.38263,-0.31373 2.76525,-0.20903 4.14788,-0.62727 1.87642,-0.94091 3.55532,-2.19545 5.33299,-3.34542 z").attr(attr);
		
		

		function displayHTMLTable(results){
			var table = "<table class='table'>";
			var data = results.data;
			 
			for(i=0;i<data.length;i++){
				table+= "<tr>";
				var row = data[i];
				var cells = row.join(",").split(",");
				 
				for(j=0;j<cells.length;j++){
					table+= "<td>";
					table+= cells[j];
					table+= "</th>";
				}
				table+= "</tr>";
			}
			table+= "</table>";
			$("#info").html(table);
		}
		
		function d3csv(state){
		
		}

            var current = null;
            for (var state in capabilitymap) {
                capabilitymap[state].color = capabilitymap[state].attr('fill');
                (function (st, state) {
                    st[0].style.cursor = "pointer";
                    
					st[0].onmouseover = function () {
					st.animate({fill: '#FF0000', stroke: "#ccc"}, 200);
					}
					
					st[0].onclick = function () {
					    
                        //current && capabilitymap[current].animate({fill: '#333' stroke: "#666",}, 600) && (document.getElementById(current).style.display = "");
                        st.animate({fill: '#FF0000', stroke: "#ccc"}, 200);
						document.getElementById('meta').innerHTML = "<h3><center>Preclinical Models Avaliable in <b>"+state+"</b></center></h3>";
						document.getElementById('info').innerHTML = "";
						d3.csv("data/"+state+".csv", function(datasetText) {
												  
							var body = d3.select("#info");
							var headers = Object.keys(datasetText[0]);

							var table = body.append('table')
							var thead = table.append('thead')
							var tbody = table.append('tbody');
						  
							var head = thead.selectAll('th')
								.data(headers)
								.enter()
								.append('th')
								.text(function(d) {
									return d;
								});

							var rows = tbody.selectAll('tr')
								.data(datasetText)
								.enter()
								.append('tr');

							var cells = rows.selectAll('td')
								.data(function(d) {
									return Object.values(d);
								})
								.enter()
								.append('td')
								.text(function(d) {
									return d;
								});
						  
						  
						  
						});
					
						
						//document.getElementById('info').innerHTML = "HELLO HELLO";
                        document.getElementById('info').style.display = "block";
                        current = state;
                    };
                    
					st[0].onmouseout = function () {
					    //document.getElementById('info').innerHTML = ""
                        st.animate({fill: st.color, stroke: "#666",}, 200);

                    };
                    
					if (state == "London") {
                        st[0].onmouseover()
                       
                    }
                })(capabilitymap[state], state);
			}
			
			var current = null
				
			for (var state in capabilitymap2) {
                capabilitymap2[state].color = capabilitymap2[state].attr('fill');
                (function (st, state) {
                    st[0].style.cursor = "pointer";
                    
					st[0].onmouseover = function () {
					console.log('triggered capabilitmap2')
					st.animate({fill: '#FF0000', stroke: "#ccc"}, 200);
					}
					
					st[0].onclick = function () {
					    
                        //current && capabilitymap[current].animate({fill: '#333' stroke: "#666",}, 600) && (document.getElementById(current).style.display = "");
                        st.animate({fill: '#FF0000', stroke: "#ccc"}, 200);
						document.getElementById('info').innerHTML = "";
						d3.csv("data/"+state+".csv", function(datasetText) {
												  
							var body = d3.select("#info");
							var headers = Object.keys(datasetText[0]);

							var table = body.append('table')
							var thead = table.append('thead')
							var tbody = table.append('tbody');
						  
							var head = thead.selectAll('th')
								.data(headers)
								.enter()
								.append('th')
								.text(function(d) {
									return d;
								});

							var rows = tbody.selectAll('tr')
								.data(datasetText)
								.enter()
								.append('tr');

							var cells = rows.selectAll('td')
								.data(function(d) {
									return Object.values(d);
								})
								.enter()
								.append('td')
								.text(function(d) {
									return d;
								});
						  
						  
						  //document.getElementById('info').innerHTML = data[1]
						});
					
						
						//document.getElementById('info').innerHTML = "HELLO HELLO";
                        document.getElementById('info').style.display = "block";
                        current = state;
                    };
                    
					st[0].onmouseout = function () {
					    //document.getElementById('info').innerHTML = ""
                        st.animate({fill: st.color, stroke: "#666",}, 200);

                    };
                    
					if (state == "London") {
                        st[0].onmouseover()
                       
                    }
                })(capabilitymap2[state], state);
			}
        };
</script>
		

<style>
body {
  margin: 0;
  font-family: Arial;
}

h1 {text-align:center;}

svg {
   top: 0;
   left: 0;
}

.top-container {
  background-color: #f1f1f1;
  padding: 15px;
  text-align: center;
}

.header {
  padding: 5px 7px;
  background: #555;
  color: #f1f1f1;
}

.content {
  padding: 16px;
}

.sticky {
  position: fixed;
  top: 0;
  width: 100%;
}

.sticky + .content {
  padding-top: 102px;
}

tr td{
    border:1px solid black;

}
tbody {
    display:block;
    max-height:650px;
    overflow-y:scroll;
	overflow-x:hidden;
}
thead, tbody tr {
    display:table;
    width:100%;
    table-layout:fixed;
}

thead {
    width:903px; 
}
table {
    width:924px;
}

th {
  font-size:15px;
  color:#777;
  background-color: #88d8c0;
  font-weight: 100;
  padding:10px;
  text-align:center;
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
  vertical-align:middle;
}

th:first-child {
  border-top-left-radius:3px;
}
 
th:last-child {
  border-top-right-radius:3px;
  border-right:none;
}
  
tr {
  border-top: 1px solid #C1C3D1;
  border-bottom: 1px solid #C1C3D1;
  color:#666B85;
  font-size:16px;
  font-weight:normal;
  text-shadow: 0 1px 1px rgba(256, 256, 256, 0.1);
}
 
tr:hover td {
  background:#4E5066;
  color:#FFFFFF;
  border-top: 1px solid #22262e;
  border-bottom: 1px solid #22262e;
}
 
tr:first-child {
  border-top:none;
}

tr:last-child {
  border-bottom:none;
}
 
tr:nth-child(odd) td {
  background:#EBEBEB;
}
 
tr:nth-child(odd):hover td {
  background:#4E5066;
}

tr:last-child td:first-child {
  border-bottom-left-radius:3px;
}
 
tr:last-child td:last-child {
  border-bottom-right-radius:3px;
}
 
td {
  background:#FFFFFF;
  padding:10px;
  text-align:left;
  vertical-align:middle;
  font-weight:300;
  font-size:14px;
  text-shadow: -1px -1px 1px rgba(0, 0, 0, 0.1);
  border-right: 1px solid #C1C3D1;
}

td:last-child {
  border-right: 0px;
}

th.text-left {
  text-align: left;
}

th.text-center {
  text-align: center;
}

th.text-right {
  text-align: right;
}

td.text-left {
  text-align: left;
}

td.text-center {
  text-align: center;
}

td.text-right {
  text-align: right;
}

#maps {
	width: 300px;
	height:780px;
	}

#info {
	width: 930px;
}

.floating-box {
    /*float: left;*/
	display:inline-block;
	vertical-align: top;
	overflow-x:hidden;
	overflow-y:auto;
	border: 3px solid #ccc;
}

#maps{
  border: 3px solid #ccc;
}

#ukmap{
  background-image: url("css/ukmap2.svg");
  display: block;
 
}

#bodymap{
 display: none;
}

.center {
    margin: auto;
    width: 1250px;
	/*border: 3px solid green;*/
    padding: 5px;
	overflow:auto;
}

/* Style the tab */
.tab {
    overflow: hidden;
    /*border: 1px solid #ccc;*/
	/*border-radius: 15px 15px 5px 5px;*/
    /*background-color: #f1f1f1;*/
}

/* Style the buttons inside the tab */
.tab button {
    background-color: #51A767;
	border: 1px solid #fff;
	border-bottom-width: 2px;
	border-bottom-color: black;
	border-radius: 0px 20px 0px 0px;
	width:50%;
    float: left;
    /*border: none;*/
    outline: 0;
    cursor: pointer;
    padding: 10px 12px;
    transition: 0.3s;
    font-size: 14px;
}

/* Change background color of buttons on hover */
.tab button:hover {
    background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
    background-color: #70E68E;
}

/* Style the tab content */
.tabcontent {
    /*display: none;*/
    /*padding: 6px 12px;*/
    /*border: 1px solid #ccc;*/
	text-align: center;
    border-top: none;
	background-repeat: no-repeat; 
}

</style>



</head>
<body>



<div class="header" id="myHeader">
  <h1>UK Preclinical Cancer Model Capability Map</h1>
</div>

<div class="content">
<script>
window.onscroll = function() {myFunction()};

var header = document.getElementById("myHeader");
var sticky = header.offsetTop;

function myFunction() {
  if (window.pageYOffset >= sticky) {
	header.classList.add("sticky");
  } else {
	header.classList.remove("sticky");
  }
}
</script>
  <div class="center">
	  <div id ="maps" class="floating-box">
	  
		<script>
		function openCity(evt, cityName) {
			var i, tabcontent, tablinks;
			tabcontent = document.getElementsByClassName("tabcontent");
			
			
			for (i = 0; i < tabcontent.length; i++) {
				tabcontent[i].style.display = "none";
			}
						
			
			tablinks = document.getElementsByClassName("tablinks");
			for (i = 0; i < tablinks.length; i++) {
				tablinks[i].className = tablinks[i].className.replace(" active", "");
			}
			document.getElementById(cityName).style.display = "block";
			evt.currentTarget.className += " active";
		}
		</script>
		
			<div>
			<h3>Choose Type of Catagories</h3>
			</div>
	  
			<div class="tab">
			  <button class="tablinks" onclick="openCity(event, 'ukmap')">UK Location Map</button>
			  <button class="tablinks" onclick="openCity(event, 'bodymap')">Body Organ Map</button>
			</div>

			<div id="ukmap" class="tabcontent">
			  <h3>Click the location on the map for more information.</h3>
			  <p></p>
			</div>

			<div id="bodymap" class="tabcontent">
			  <h3>Body Organ Map</h3>
			  <p></p> 
			</div>
	  </div>
	  <div class="floating-box" style="height: 780px">
	    <div id = "meta">
		  <h3><center>Preclinical Models Avaliable</center></h3>
		</div>
	    <div id ="info">
	      <p>Click the left panel for information</h3>
		</div>
	  </div>
	</div>
</div>

</body>
</html>